<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · Dispersal.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Dispersal.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href="index.html">Introduction</a><ul class="internal"><li><a class="toctext" href="#Example-1">Example</a></li><li><a class="toctext" href="#Models-1">Models</a></li><li><a class="toctext" href="#Neighborhoods-1">Neighborhoods</a></li><li><a class="toctext" href="#Layers-1">Layers</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="index.html">Introduction</a></li></ul><a class="edit-page" href="https://github.com/rafaqz/Dispersal.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Introduction</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Dispersal.jl-1" href="#Dispersal.jl-1">Dispersal.jl</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal" href="#Dispersal"><code>Dispersal</code></a> — <span class="docstring-category">Module</span>.</div><div><p>This package extends <a href="https://github.com/rafaqz/Cellular.jl">Cellular.jl</a></p><p><a href="https://github.com/rafaqz/Dispersal.jl">Dispersal.jl</a> provides a range of dispersal modules that can be combined to build grid-based organism dispersal simulations.</p><p>The design provides a solid framewhork while allowing customisation of any  aspect of a simulation. A model may start with the defaults and formulations provided,  but incrementally customise them for a particular use-case, to any level of detail. </p><p>Additionally, modules, outputs, neighborhoods provided by Cellular.jl or other  packages that extend it may all be incorporated into a simulaiton.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/Dispersal.jl#L1-L13">source</a></section><h2><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h2><p>This is the general pattern of running model in Dispersal.jl. </p><p>We declare a suitability layer and initial conditions. Then we run a dispersal simulation that combines local and jump dispersal, for three timesteps.</p><div><pre><code class="language-julia">using Cellular
using Dispersal

# add a 0.0-1.0 scaled raster array that represents habitat suitability
suitability = [0.5 0.0 0.3 0.0 0.0 0.3 0.0;
               0.0 0.2 0.8 0.0 0.9 0.6 0.0;
               0.0 0.5 1.0 1.0 1.0 0.0 0.0;
               0.0 0.0 1.0 1.0 0.7 0.0 0.0;
               0.0 0.0 0.6 1.0 0.0 0.0 0.0;
               0.0 0.1 0.6 0.0 0.0 0.0 0.0;
               0.0 0.0 0.0 0.0 0.0 0.0 0.7]

# Make an init array the same size as your suitability layer, and seed it
init = [0  0  0  0  0  0  0;
        0  0  0  0  0  0  0;
        0  0  0  0  0  0  0;
        0  0  0  0  0  0  0;
        0  0  1  0  0  0  0;
        0  0  0  0  0  0  0;
        0  0  0  0  0  0  0]

# You also could do this with:
# init = zeros(suitability); init[5, 3] = 1


# Define a dispersal kernel function

f = d -&gt; e^-d

# Define the neighborhood, using the dispersal kernel and a radius
hood = DispersalNeighborhood(; f=f, radius=2)

# Define additional raster layers
layers = SuitabilityLayer(suitability)

# Define disersal modules
localdisp = LocalDispersal(layers=layers, neighborhood=hood)
jumpdisp = JumpDispersal(layers=layers)

# Set the output type
output = ArrayOutput(init)

# Run the simulation
sim!(output, (localdisp, jumpdisp), init; time=1:3)

output.frames[3]</code></pre><pre><code class="language-none">7×7 Array{Int64,2}:
 1  0  1  0  0  1  0
 0  1  1  0  1  1  0
 0  1  1  1  1  0  0
 0  0  1  1  1  0  0
 0  0  1  1  0  0  0
 0  0  1  0  0  0  0
 0  0  0  0  0  0  0</code></pre></div><h2><a class="nav-anchor" id="Models-1" href="#Models-1">Models</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractLocalDispersal" href="#Dispersal.AbstractLocalDispersal"><code>Dispersal.AbstractLocalDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractLocalDispersal &lt;: Cellular.AbstractModel</code></pre><p>Extend to modify <a href="index.html#Dispersal.LocalDispersal"><code>LocalDispersal</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L1">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.LocalDispersal" href="#Dispersal.LocalDispersal"><code>Dispersal.LocalDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct LocalDispersal{N, L, P, S} &lt;: Dispersal.AbstractLocalDispersal</code></pre><p>Local dispersal within a <a href="index.html#Dispersal.DispersalNeighborhood"><code>DispersalNeighborhood</code></a>] or other <a href="@ref">AbstractNeighborhood</a></p><p><strong>Keyword Arguments</strong></p><ul><li><p>neighborhood: = DispersalNeighborhood()</p></li><li><p>prob: A real number between one and zero.</p></li><li><p>layers: <a href="@ref">AbstractLayers</a> or a single <a href="index.html#Dispersal.AbstractLayer"><code>AbstractLayer</code></a>. The default is <code>nothing</code>.</p></li><li><p>cellsize::S = A number or Unitful.jl distance.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractJumpDispersal" href="#Dispersal.AbstractJumpDispersal"><code>Dispersal.AbstractJumpDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractJumpDispersal &lt;: Cellular.AbstractInPlaceModel</code></pre><p>Extend to modify <a href="index.html#Dispersal.JumpDispersal"><code>JumpDispersal</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L25">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.JumpDispersal" href="#Dispersal.JumpDispersal"><code>Dispersal.JumpDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct JumpDispersal{L, S} &lt;: Dispersal.AbstractJumpDispersal</code></pre><p>Local dispersal within a <a href="index.html#Dispersal.DispersalNeighborhood"><code>DispersalNeighborhood</code></a>] or other <a href="@ref">AbstractNeighborhood</a></p><p><strong>Keyword Arguments</strong></p><ul><li><p>spotrange: A number or Unitful.jl distance.</p></li><li><p>prob: A real number between one and zero.</p></li><li><p>layers: <a href="index.html#Dispersal.AbstractLayers"><code>AbstractLayers</code></a> or a single <a href="@ref">AbstractLayer</a>. The default is <code>nothing</code>.</p></li><li><p>cellsize::S = A number or Unitful.jl distance.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L31">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractHumanDispersal" href="#Dispersal.AbstractHumanDispersal"><code>Dispersal.AbstractHumanDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractHumanDispersal &lt;: Cellular.AbstractInPlaceModel</code></pre><p>Inherit to exten human dispersal</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L48">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.HumanDispersal" href="#Dispersal.HumanDispersal"><code>Dispersal.HumanDispersal</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct HumanDispersal{L, S} &lt;: Dispersal.AbstractHumanDispersal</code></pre><p>Human dispersal model.</p><ul><li><p><code>human</code></p></li><li><p><code>layers</code></p></li><li><p><code>cellsize</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L53">source</a></section><p>These modules all trigger methods of <code>rule</code>:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Cellular.rule" href="#Cellular.rule"><code>Cellular.rule</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">rule(model, state, index, t, args)
</code></pre><p>Short range rule for <a href="index.html#Dispersal.AbstractLocalDispersal"><code>AbstractLocalDispersal</code></a> dispersal. Cells are invaded  if there is pressure and suitable habitat, otherwise left as-is.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L124">source</a><div><pre><code class="language-julia">rule(model, state, index, t, source, args)
</code></pre><p>Long range rule for <a href="index.html#Dispersal.AbstractJumpDispersal"><code>AbstractJumpDispersal</code></a>. A random cell within the spotrange is invaded if it is suitable.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L135">source</a></section><h2><a class="nav-anchor" id="Neighborhoods-1" href="#Neighborhoods-1">Neighborhoods</a></h2><p>Extend Cellular.AbstractNeighborhood</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractDispersalNeighborhood" href="#Dispersal.AbstractDispersalNeighborhood"><code>Dispersal.AbstractDispersalNeighborhood</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractDispersalNeighborhood &lt;: Cellular.AbstractNeighborhood</code></pre><p>Neighborhoods for dispersal</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L65">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.DispersalNeighborhood" href="#Dispersal.DispersalNeighborhood"><code>Dispersal.DispersalNeighborhood</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct DispersalNeighborhood{K, S} &lt;: Dispersal.AbstractDispersalNeighborhood</code></pre><p>A neighborhood built from a dispersal kernel function and a cell radius.</p><p><strong>Arguments:</strong></p><ul><li><p><code>dispkernel::AbstractArray{T,2}</code></p></li><li><p><code>overflow::AbstractOverflow</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L71">source</a></section><h3><a class="nav-anchor" id="Customisation-1" href="#Customisation-1">Customisation</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Cellular.neighbors" href="#Cellular.neighbors"><code>Cellular.neighbors</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">neighbors(h, state, index, t, source, args)
</code></pre><p>Returns nieghbors for a <a href="index.html#Dispersal.DispersalNeighborhood"><code>DispersalNeighborhood</code></a>, looping over the array of dispersal propabilities.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L159">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.build_dispersal_kernel" href="#Dispersal.build_dispersal_kernel"><code>Dispersal.build_dispersal_kernel</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">build_dispersal_kernel(f, r)
</code></pre><p>Accepts a dispersal kernel function and integer radius, and returns an array of probabilities, of size  2r + 1 * 2r + 1.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L97">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.pressure" href="#Dispersal.pressure"><code>Dispersal.pressure</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">pressure(model, cc)</code></pre><p>defined at <a href="https://github.com/rafaqz/Dispersal.jl/tree/1c1ebbb0b209224182eb986f92ab21506c1636fd//src/disperse.jl#L122"><code>Dispersal/src/disperse.jl:122</code></a>.</p><p>Calculates the propagule pressure from the output of a neighborhood.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/disperse.jl#L116">source</a></section><h2><a class="nav-anchor" id="Layers-1" href="#Layers-1">Layers</a></h2><p>Layers are a concept not present in Cellular.jl. They provide  overlay grids of additional information about dispersal potential. Raw arrays are wrapped in a type that determines how they will be used.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractLayer" href="#Dispersal.AbstractLayer"><code>Dispersal.AbstractLayer</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractLayer</code></pre><p>Layers wrap an array, normally built from some kind of raster.</p><p>The wrapper defines the purpose of the layer and allows specialised  method dispatch to utilise them.</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L5">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractSuitabilityLayer" href="#Dispersal.AbstractSuitabilityLayer"><code>Dispersal.AbstractSuitabilityLayer</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractSuitabilityLayer &lt;: Dispersal.AbstractLayer</code></pre></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L22">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.SuitabilityLayer" href="#Dispersal.SuitabilityLayer"><code>Dispersal.SuitabilityLayer</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct SuitabilityLayer{T} &lt;: Dispersal.AbstractSuitabilityLayer</code></pre><ul><li><p><code>data</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractSuitabilitySequence" href="#Dispersal.AbstractSuitabilitySequence"><code>Dispersal.AbstractSuitabilitySequence</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractSuitabilitySequence &lt;: Dispersal.AbstractSuitabilityLayer</code></pre></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L34">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.SuitabilitySequence" href="#Dispersal.SuitabilitySequence"><code>Dispersal.SuitabilitySequence</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct SuitabilitySequence{T, D} &lt;: Dispersal.AbstractSuitabilitySequence</code></pre><ul><li><p><code>timespan</code></p></li><li><p><code>data</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L39">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.HumanLayer" href="#Dispersal.HumanLayer"><code>Dispersal.HumanLayer</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct HumanLayer{T} &lt;: Dispersal.AbstractLayer</code></pre><ul><li><p><code>data</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.AbstractLayers" href="#Dispersal.AbstractLayers"><code>Dispersal.AbstractLayers</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract AbstractLayers</code></pre></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L48">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.Layers" href="#Dispersal.Layers"><code>Dispersal.Layers</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct Layers{S, F} &lt;: Dispersal.AbstractLayers</code></pre><ul><li><p><code>suitability</code></p></li><li><p><code>human</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L53">source</a></section><h3><a class="nav-anchor" id="Customisation-2" href="#Customisation-2">Customisation</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.suitability" href="#Dispersal.suitability"><code>Dispersal.suitability</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">suitability(layers, row, col, t)
</code></pre><p>Returns a suitability scalar from a single layer, or the product of multiple layers</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L63">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.seq_interpolate" href="#Dispersal.seq_interpolate"><code>Dispersal.seq_interpolate</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">seq_interpolate(layer, row, col, t)
</code></pre><p>Interpolates between layers in a sequence</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L90">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dispersal.get_cell" href="#Dispersal.get_cell"><code>Dispersal.get_cell</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">get_cell(layer, row, col, pos)
</code></pre><p>Return a particular cell from a layer, given row, column and timestep)</p></div><a class="source-link" target="_blank" href="https://github.com/rafaqz/Dispersal.jl/blob/1c1ebbb0b209224182eb986f92ab21506c1636fd/src/layers.jl#L79">source</a></section><footer><hr/></footer></article></body></html>
